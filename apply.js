!function(e){var t,n,i=i||{};function o(o,l){if(o.objectId){var p={};switch(o.objectId){case"cosigner-application-school-and-loan-information-section-school-state":case"borrower-application-school-and-loan-information-section-school-state":(l=i.getSchoolState())&&i.setDimension("school_state",l);break;case"cosigner-application-school-and-loan-information-section-school-search":case"borrower-application-school-and-loan-information-section-school-search":l=i.getSchoolCode();var u=i.toTitleCase(i.getSchoolName());u&&-1!=u.indexOf(" - ")&&(u=u.substring(0,u.lastIndexOf(" - "))),i.setDimension("school_doe_code",l),i.setDimension("school_name",u);break;case"borrower-application-submit-cosigner-ready-to-apply-yes":case"soft-decline-cosigner-here":p.cosigner_present="Yes";break;case"borrower-application-submit-cosigner-ready-to-apply-no":case"soft-decline-cosigner-not-here":p.cosigner_present="No";break;case"borrower-application-basic-information-section-first-name":o.dimensions.cosigner_first||(i.trackEvent(n,"Application - start",i.getUserSegment()),i.dataChannel.publishEvent("App Start",i.getTPTEventData()));break;case"cosigner-application-basic-information-section-first-name":o.dimensions.cosigner_first&&i.trackEvent(n,"Application - start",i.getUserSegment()),i.dataChannel.publishEvent("App Start",i.getTPTEventData());break;case"borrower-application-basic-information-section-email-address":o.dimensions.cosigner_first&&i.dataChannel.publishEvent("App Start",i.getTPTEventData());break;case"borrower-application-school-and-loan-information-section-year-in-school":o&&o.dimensions&&o.dimensions.year_in_school&&i.setDimension("borrower_enrollment_term",o.dimensions.year_in_school);break;case"borrower-application-contact-information-section-zip-code":l=i.getBorrowerZipCode(),/^\d{5}$/.test(l)&&i.setDimension("borrower_zip_code",l);break;case"cosigner-application-personal-information-section-citizenship":case"borrower-application-personal-information-section-citizenship":o&&o.dimensions&&o.dimensions.citizenship&&i.setDimension("citizenship",o.dimensions.citizenship)}/yes|true|on/i.test(String(google_tag_manager.rm[8297021](55)))&&(p.form_field_id=o.objectId,l="Form Field - interaction","Currency Field Incrementer"===o.object&&(l=o.object+" - "+o.action),i.trackEvent(o.dimensions.page_template+" Forms > "+t,l,o.objectId,{dimensions:p}))}else{if(/Bureau Fail/i.test(o.object)&&/Cosigner/i.test(o.dimensions.user_segment)?o.dimensions.user_segment=digitalData.user_segment="Borrower-Cosigner":/Soft Decline/i.test(o.object)&&/continue/i.test(o.action)&&!o.optTarget&&(o.action=o.dimensions&&o.dimensions.student_major?"submit major":"continue with cosigner"),p=i.getUserSegment()+" > "+o.object+" - "+o.action.toLowerCase(),o.optTarget&&/^(continue|back)$/i.test(o.action)&&(p+=" to "+("CASL.com"==o.optTarget?o.optTarget:o.optTarget.toLowerCase())),"Borrower > Submit Application - continue"==p)l=a(o),u=r(o),"No"==l&&"No"==u?(c(),i.dataChannel.publishEvent("App Complete - Hard Pull",i.getTPTEventData())):o.dimensions.cosigner_first?c():function(e){var t=s();i.trackDecision(t,"borrower_cosigner_pending",(function(){i.trackEvent(n,"Application - cosigner pending","apply_with_cosigner=Yes|cosigner_present="+e);var t=i.getTPTEventData();t.cosignerPresent=e,i.dataChannel.publishEvent("Cosigner Pending",t)}))}(u),l=i.createLabel(["apply_with_cosigner",l],["cosigner_present",u]);else if("Cosigner > Submit Application - continue"==p)if(o.dimensions.cosigner_first){(l=o.dimensions.student_present)&&i.setDimension("borrower_present",l),u=l,s(),i.trackEvent(n,"Application - borrower pending","borrower_present="+u);var m=i.getTPTEventData();m.borrowerPresent=u,i.dataChannel.publishEvent("Borrower Pending",m),l=i.createLabel(["borrower_present",l])}else c();else"Borrower > Soft Decline - continue with cosigner"==p&&(l=a(o),u=r(o),l=i.createLabel(["apply_with_cosigner",l],["cosigner_present",u]),(m=i.getTPTEventData()).cosignerPresent=u,i.dataChannel.publishEvent("Soft Decline - Cosigner Pending",m));"apply_with_cosigner=Yes|cosigner_present=No"==l&&e(document).trigger("cosInvited"),/Borrower-Cosigner > Esign Return - (borrower|cosigner) complete/.test(p)&&(u=p.match(/Borrower-Cosigner > Esign Return - (borrower|cosigner) complete/)[1],e(document).trigger("esignCompleteView",[{userSegment:u}])),/Welcome - view/.test(p)&&(p="Borrower-Cosigner > Welcome - view"),/Loan Configuration - continue/.test(p)&&"All Options"==l&&(o.dimensions.repayment_type&&(l+="|"+(u={FD:"Deferred",PI:"Full Principal & Interest",FP:"Flat",IO:"Interest Only"}[o.dimensions.repayment_type]||o.dimensions.repayment_type)),o.dimensions.loan_term&&(l+="|"+o.dimensions.loan_term+" Yrs"),"V"==o.dimensions.interest_rate_type?l+="|Variable":"F"==o.dimensions.interest_rate_type&&(l+="|Fixed")),/Personal Info - prefilled/.test(p)&&(i.trackEvent(n,"Application - start",i.getUserSegment()),i.dataChannel.publishEvent("App Start",i.getTPTEventData())),/Find Application - continue/.test(p)&&i.dataChannel.publishEvent("Find Application",i.getTPTEventData()),/Loan Amount Modal - continue/.test(p)&&(p=p.replace("- continue","- click change amount")),(u=o.dimensions)&&(u.total_num_loans&&i.setDimension("total_student_loans",u.total_num_loans),u.total_loan_balance&&i.setDimension("total_student_loan_balance",u.total_loan_balance),u.interest_rate_type&&(m={V:"Variable Rate",F:"Fixed Rate"}[u.interest_rate_type]||u.interest_rate_type,i.setDimension("interest_rate_type",m)),u.repayment_type&&(m={FD:"Deferred",PI:"Full Principal & Interest",FP:"Flat",IO:"Interest Only"}[u.repayment_type]||u.repayment_type,i.setDimension("application_repayment_option",m)),u.loan_term&&i.setDimension("application_loan_term",u.loan_term),u.student_major&&i.setDimension("soft_declined_student_major",u.student_major),u.bankName&&i.setDimension("application_bank_name",u.bankName)),u={},o.dimensions&&o.dimensions.load_time&&(u.time_pdf_download=o.dimensions.load_time),o.dimensions&&o.dimensions.esign_load_time&&(u.time_esign_compiling=o.dimensions.esign_load_time),i.trackEvent(n,p,l,{dimensions:u})}}function a(e){var t=e.dimensions.apply_with_cosigner;return e.dimensions.cosigner_first&&(t="Yes"),t&&i.setDimension("apply_with_cosigner",t),t}function r(e){var t=e.dimensions.cosigner_present;return e.dimensions.cosigner_first&&(t="N/A"),t&&i.setDimension("cosigner_present",t),t}function s(){var e=i.getApplicationId();return e&&i.setDimension("fni_reference_number",e),e}function c(){var e=s(),t=/borrower/i.test(i.getUserSegment())?"borrower":"cosigner";i.trackDecision(e,t+"_app_complete",(function(){i.trackEvent(n,"Application - complete",i.createLabel(["reference_number",e||"(not set)"],["user_segment",i.getUserSegment()])),i.dataChannel.publishEvent("App Complete",i.getTPTEventData())}))}function l(e){var t=s();e&&e.dimensions&&"APPROVE"==e.dimensions.app_decision&&i.trackDecision(t,"conditional_approval",(function(){i.trackEvent(n,"Application - conditional approval",e.dimensions.user_segment),i.dataChannel.publishEvent("App Complete - Conditional Approval",i.getTPTEventData())}))}function p(e,o){var a=e.replace(/\s+/g,""),r=i.getUserSegment();/Welcome/.test(e)&&(r="Borrower-Cosigner");var s=i,c=s.setContentGroup,l=r,p=a;switch(l=/^LoanStatus/i.test(p)?l+" > Loan Status":/Welcome$/i.test(p)?l+" > Welcome":/VisitObjective/i.test(p)?l+" > Visit Objective":/InviteBorrower$/i.test(p)?l+" > Invite Borrower":/InviteBorrowerConfirmation/i.test(p)?l+" > Invite Borrower Confirmation":/FindApplication/i.test(p)?l+" > Find Application":/GetStarted/i.test(p)?l+" > Get Started":/PersonalInfo/i.test(p)||/ContactInfo/i.test(p)||/SchoolInfo/i.test(p)||/SecurityInfo/i.test(p)||/RequestedLoanInfo/i.test(p)?l+" > Personal Info":/ApplicationSolicitationDisclosure/i.test(p)?l+" > Application Solicitation Disclosure":/LoanConfiguration/i.test(p)?l+" > Loan Configuration":/LoanConfigurationConfirmation/i.test(p)?l+" > Loan Configuration Confirmation":/LoanReconfiguration/i.test(p)?l+" > Loan Reconfiguration":/LoanReconfigurationConfirmation/i.test(p)?l+" > Loan Reconfiguration Confirmation":/ApprovalDisclosure/i.test(p)?l+" > Approval Disclosure":/LoanReconfigurationApprovalDisclosure/i.test(p)?l+" > Loan Reconfiguration Approval Disclosure":/SubmitApplication/i.test(p)?l+" > Submit Application":/SoftDecline/i.test(p)||/HardDecline/i.test(p)?l+" > Application Decision":/EsignPending/i.test(p)?l+" > Esign Pending":/EsignReturn/i.test(p)?l+" > Esign Return":/IdentityDocsNeeded/i.test(p)?l+" > Identity Docs Needed":/UploadIdentityDocs/i.test(p)?l+" > Upload Identity Docs":/ApplicationPending/i.test(p)?l+" > Application Pending":/ApplicationCertificationPending/i.test(p)?l+" > Application Certification Pending":/FinalDisclosure/i.test(p)?l+" > Final Disclosure":/BureauFail/i.test(p)?l+" > Error":/InternationalLockout/i.test(p)?l+" > International Lockout":/Maintenance/i.test(p)||/Error/i.test(p)||/404/i.test(p)?l+" > Error":/SessionTimeout/i.test(p)?l+" > Session Timeout":/LoanInfo/i.test(p)?l+" > Loan Info":/Account Information/i.test(p)?l+"> Account Information":"(Other)",c.call(s,3,l),(s=i.getUserCountry())&&i.setDimension("user_country",s),t){case"In School":var u="IS";break;case"Refi":u="RF";break;case"Parent":u="PA"}a="/virtual-page/"+u+"/"+r+"/"+a,i.trackPageView(a),window.zE&&(zE("webWidget","updatePath",{url:location.href,title:document.title}),"chat"===zE("webWidget:get","display")&&window.proactiveChatShowing&&(zE("webWidget","close"),zE("webWidget","reset"))),e+=" - view",a={},digitalData.loan_pricing_array&&("CAISHL"==digitalData.source_code&&/Loan Configuration Confirmation - view/.test(e)||/Loan Configuration - view/.test(e))&&(a.application_loan_pricing_array=digitalData.loan_pricing_array),i.trackEvent(n,r+" > "+e,o,{dimensions:a,nonInteraction:!0})}function u(o){var a=o.dimensions.step_name,r=i.getUserSegment();switch(a){case"Welcome":case"Visit Objective":case"Invite Borrower":case"Invite Borrower Confirmation":case"Find Application":case"Get Started":case"School Info":case"Security Info":case"Requested Loan Info":case"Submit Application":case"Loan Configuration Confirmation":case"Esign Compiling":case"Identity Docs Needed":case"Upload Identity Docs":case"Application Pending":case"Loan Reconfiguration":case"Loan Reconfiguration Confirmation":case"Loan Reconfiguration Approval Disclosure":case"Bureau Fail":case"Error":case"Maintenance":case"404":case"Session Timeout":case"Loan Status Welcome":case"Loan Status Lookup":case"Loan Status Thanks":case"Account Information":case"Bureau Frozen":case"Bureau Exception":case"Lemonade Referral":p(a);break;case"Contact Info":p("Personal Info"),p("Contact Info"),i.dataChannel.publishEvent("App Visit",i.getTPTEventData());break;case"Personal Info":p(a),/borrower/i.test(r)&&e(document).trigger("borPersonalInfoView"),/cosigner/i.test(r)&&e(document).trigger("cosPersonalInfoView"),i.dataChannel.publishEvent("App Visit",i.getTPTEventData());break;case"Application Solicitation Disclosure":p(a),e(document).trigger("ASDView",[{userSegment:r}]),i.dataChannel.publishEvent("Info Submitted",i.getTPTEventData()),"Refi"==t&&i.getCookie("ambassador_shortcode")&&(i.setDimension("ambassador_shortcode",i.getCookie("ambassador_shortcode")),i.trackEvent(n,"Ambassador Referral - trigger",i.getCookie("ambassador_shortcode")));break;case"Stride Referral":p(a),e(document).trigger("trackYoutubeVideo");break;case"Soft Decline":p(a),e(document).trigger("softDeclineView"),i.trackDecision(s(),"borrower_soft_decline",(function(){i.trackEvent(n,"Application - soft decline"),i.dataChannel.publishEvent("Soft Decline View",i.getTPTEventData())}));break;case"Hard Decline":p(a),e(document).trigger("hardDeclineView",[{userSegment:r}]),i.trackDecision(s(),"hard_decline",(function(){i.trackEvent(n,"Application - hard decline",r),i.dataChannel.publishEvent("Hard Decline View",i.getTPTEventData())}));break;case"Loan Configuration":if(o.dimensions.default_repayment_type){var c={FD:"Deferred",PI:"Full Principal & Interest",FP:"Flat",IO:"Interest Only"}[o.dimensions.default_repayment_type]||o.dimensions.default_repayment_type;i.setDimension("application_default_repayment_option",c)}o.dimensions.default_loan_term&&i.setDimension("application_default_loan_term",o.dimensions.default_loan_term),o.dimensions.default_configuration_id&&i.setDimension("application_default_loan_config_id",o.dimensions.default_configuration_id),p(a),l(o),e(document).trigger("loanConfigView",[{userSegment:r}]),i.dataChannel.publishEvent("Loan Configuration View");break;case"Approval Disclosure":p(a),i.dataChannel.publishEvent("LAD View",i.getTPTEventData());break;case"Esign Pending":p(a),e(document).trigger("esignatureView",[{userSegment:r}]);break;case"Esign Return":p(a),e(document).trigger("esignCompleteView",[{userSegment:r}]),i.dataChannel.publishEvent("Esign Complete View",i.getTPTEventData());break;case"Application Certification Pending":p(a),"In School"!=t&&"Parent"!=t||i.trackDecision(s(),"completed_loan",(function(){i.trackEvent(n,"Application - completed loan"),i.dataChannel.publishEvent("ACP View",i.getTPTEventData())}));break;case"Final Disclosure":p(a),"Refi"==t&&i.trackDecision(s(),"completed_loan",(function(){i.trackEvent(n,"Application - completed loan"),i.dataChannel.publishEvent("ACP View",i.getTPTEventData())}));break;case"International Lockout":p(a,i.getUserCountry());break;case"Loan Info":p(a),e(document).trigger("loanConfigView",[{userSegment:r}]),l(o);break;default:a?i.trackEvent("Global Notifications","Error: step name is not supported",a):i.trackEvent("Global Notifications","Error: step name is not defined")}}function m(e,t,n){return{object:n||i.getStepName(),action:t||"continue",optTarget:e||"",dimensions:{product_type:i.getProductType(),page_template:"Loan Application",user_segment:i.getUserSegment()}}}e&&(i.trackVWOExperiments(),setInterval((function(){if(window.eventQueue&&eventQueue.length)do{var a=data=eventQueue.shift();a&&a.dimensions&&a.dimensions.user_segment&&i.setUserSegment(a.dimensions.user_segment),s(),i.setDimension("user_segment",i.getUserSegment()),i.setDimension("loanapp_url_pathname",location.pathname),a&&!e.isEmptyObject(a.dimensions)&&(t=a.dimensions.product_type,n=(a.dimensions.page_template||"Loan Application")+" > "+t,i.setDimension("loanapp_step_name",a.dimensions.step_name),i.setDimension("is_cosignerfirst_flow",a.dimensions.cosigner_first),i.setDimension("requested_loan_amount",i.getLoanAmount()));var r=i.getURLParameter("SC")||a&&a.dimensions&&a.dimensions.source_code;switch(r&&i.setDimension("source_code",r),(r=i.getChannelGrouping())&&i.setDimension("fni_channel_grouping",r),a.type){case"event":o(a,a.optLabel);break;case"pageview":u(a);break;default:i.trackEvent("Global Notifications","Error: hit type is not supported",a.type)}}while(eventQueue.length)}),9),e(document).on("click",".continue-to-personal-info",(function(t){t.preventDefault();var n=e(this).attr("href");o(m("personal info")),setTimeout((function(){location.href=n}),250)})),e(document).on("click",".continue-to-apply-now",(function(t){t.preventDefault();var n=e(this).attr("href");o(m("apply now")),setTimeout((function(){location.href=n}),250)})),e(document).on("click",".continue-to-find-application",(function(t){t.preventDefault();var n=e(this).attr("href");o(m("find application")),setTimeout((function(){location.href=n}),250)})),e(document).on("click",".continue-to-visit-objective",(function(t){t.preventDefault();var n=e(this).attr("href");o(m("visit objective")),setTimeout((function(){location.href=n}),250)})),e(document).on("click",".continue-to-invite-borrower",(function(t){t.preventDefault();var n=e(this).attr("href");o(m("invite borrower")),setTimeout((function(){location.href=n}),250)})),e(document).on("click",".continue-to-casl",(function(t){t.preventDefault();var n=e(this).attr("href"),i=e(this).attr("target");o(m("CASL.com"),e(this).attr("href")),setTimeout((function(){"_blank"==i?window.open(n):location.href=n}),250)})),e(document).on("click",".trouble-esigning",(function(t){t.preventDefault();var n=e(this).attr("href");o(m("","click","Trouble Esigning")),setTimeout((function(){location.href=n}),250)})),e(document).on("click",".esign-borrower-not-present",(function(t){t.preventDefault();var n=e(this).attr("href");o(m("","borrower not present")),setTimeout((function(){location.href=n}),250)})),e(document).on("click",".esign-cosigner-not-present",(function(t){t.preventDefault();var n=e(this).attr("href");o(m("","cosigner not present")),setTimeout((function(){location.href=n}),250)})),e(document).on("click",".cosigner-return-esign, .cosigner-return-upload",(function(t){t.preventDefault();var n=e(this).attr("href");o(m("cosigner login")),setTimeout((function(){location.href=n}),250)})),e(document).on("click",".borrower-return-esign, .borrower-return-upload",(function(t){t.preventDefault();var n=e(this).attr("href");o(m("borrower login")),setTimeout((function(){location.href=n}),250)})),e(document).on("click","[id$='upload-container'] > label",(function(){var t=e(this).closest("[id$='upload-container']").attr("id");o(m(void 0,"click upload documents button"),t)})),e(document).on("input",".school-search-container .Select-control",(function(){if(e(".school-search-container .Select-menu-outer .Select-noresults").length){var t=e(this).find("input").val();clearTimeout(window.schoolSearchTimer),window.schoolSearchTimer=setTimeout((function(){var e=i.getUserSegment();e+=" > School Search - not found",i.trackEvent(n,e,null,{dimensions:{not_found_school_entry:t}})}),1e3)}})))}(window.jQuery);